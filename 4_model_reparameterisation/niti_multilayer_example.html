
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>NiTi multilayer example &#8212; Introduction to neutron reflectometry fitting</title>
    
  <link href="../_static/css/theme.css" rel="stylesheet">
  <link href="../_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/css/blank.css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/sphinx-book-theme.d59cb220de22ca1c485ebbdc042f0030.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Phospholipid monolayer example" href="phospholipid_monolayer_example.html" />
    <link rel="prev" title="A case for model reparameterisation" href="a_case_for_model_reparameterisation.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><div class="container-xl">

  <div id="navbar-start">
    
    

<a class="navbar-brand" href="../intro.html">
  <img src="../_static/logo.png" class="logo" alt="logo">
</a>


    
  </div>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapsible" aria-controls="navbar-collapsible" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  
  <div id="navbar-collapsible" class="col-lg-9 collapse navbar-collapse">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <ul id="navbar-main-elements" class="navbar-nav">
    <li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../1_the_fourier_transform/an_introduction_to_fourier_transforms.html">
  An introduction to Fourier transforms
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../1_the_fourier_transform/fourier_transforms_for_reflectometry_analysis.html">
  Fourier transforms for reflectometry analysis
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../2_model_dependent_analysis/what_is_model_dependent_analysis.html">
  What is model-dependent analysis?
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../3_reflectometry_slab_models/the_slab_model.html">
  The “slab model”
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../3_reflectometry_slab_models/how_we_calculate_the_reflectivity_of_a_slab_model.html">
  How we calculate the reflectivity of a slab model
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../3_reflectometry_slab_models/roughness_and_microslicing.html">
  Roughness and microslicing
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="a_case_for_model_reparameterisation.html">
  A case for model reparameterisation
 </a>
</li>

<li class="toctree-l1 current active nav-item">
 <a class="current reference internal nav-link" href="#">
  NiTi multilayer example
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="phospholipid_monolayer_example.html">
  Phospholipid monolayer example
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../5_fitting_processes_and_problems/what_is_the_likelihood.html">
  What is the likelihood?
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../5_fitting_processes_and_problems/how_do_we_maximise_the_likelihood.html">
  How do we maximise the likelihood?
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../5_fitting_processes_and_problems/how_to_leverage_our_prior_knowledge.html">
  How to leverage our prior knowledge?
 </a>
</li>

    
</ul>
      </div>
      
    </div>

    <div id="navbar-end">
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
      </ul>
      </div>
      
    </div>
  </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
            
            <!-- Only show if we have sidebars configured, else just a small margin  -->
            <div class="col-12 col-md-3 bd-sidebar"><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    
  </div>
</nav>
            </div>
            
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
            
              
              <div class="toc-item">
                
<div class="tocsection onthispage pt-5 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#scattering-length-density-mass-density">
   Scattering length density → Mass density
  </a>
 </li>
</ul>

</nav>
              </div>
              
              <div class="toc-item">
                
              </div>
              
            
          </div>
          

          
          
            
          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  <div class="tex2jax_ignore mathjax_ignore section" id="niti-multilayer-example">
<h1>NiTi multilayer example<a class="headerlink" href="#niti-multilayer-example" title="Permalink to this headline">¶</a></h1>
<p><a class="reference external" href="https://pan-learning.org/moodle/course/view.php?id=96"><strong>Interact with this notebook via pan-learning.org</strong></a></p>
<p>For our first example, we will consider a simple hard matter system, where there is a <strong>repeating multilayer</strong> of nickel and titanium that has been deposited on the surface of a piece of silicon.
The process by which these systems are prepared typically involves the disposition of a layer of titanium, followed by a layer of nickel, followed by titanium, this process is repeated until the desired number of layers is reached.
Below we show, graphically, a model that we may use for the simulation of reflectometry data from such a system.</p>
<div class="figure align-center" id="multilayer">
<a class="reference internal image-reference" href="../_images/multilayer.png"><img alt="../_images/multilayer.png" src="../_images/multilayer.png" style="height: 400px;" /></a>
<p class="caption"><span class="caption-number">Fig. 6 </span><span class="caption-text">A graphical example of the NiTi multilayer system consisting of three repeats.</span><a class="headerlink" href="#multilayer" title="Permalink to this image">¶</a></p>
</div>
<p>A common assumption that is made in the analysis of reflectometry data from such a sample include that the structure of each repeat is the same.
Therefore the model can be defined such that there are only a <strong>limited number of variables</strong>.
However, this can still be unclear, as three of these parameters will be the scattering length densities of nickel, titanium, and silicon.
While these values can be obtained from <a class="reference external" href="https://slddb.esss.dk/slddb/">online databases</a>, we can also reparameterised these in terms of the mass density of the material.</p>
<div class="section" id="scattering-length-density-mass-density">
<h2>Scattering length density → Mass density<a class="headerlink" href="#scattering-length-density-mass-density" title="Permalink to this headline">¶</a></h2>
<p>The scattering length density, <span class="math notranslate nohighlight">\(\beta\)</span>, for a material is directly related to its mass density, <span class="math notranslate nohighlight">\(\rho\)</span>,</p>
<div class="math notranslate nohighlight">
\[
\beta = \frac{\rho N_a \sum_{i=1}^{N}b_i}{M_w}, 
\]</div>
<p>where, <span class="math notranslate nohighlight">\(N_a\)</span> is Avogadro’s constant, <span class="math notranslate nohighlight">\(b_i\)</span> are the neutron scattering lengths for each of the <span class="math notranslate nohighlight">\(N\)</span> elements in the material, and <span class="math notranslate nohighlight">\(M_w\)</span> is the molecular mass of the material.
Therefore, if we consider nickel, which has a density of <span class="math notranslate nohighlight">\(8.908\)</span> gcm<sup>-3</sup> at room temperature and a <a class="reference external" href="https://www.ncnr.nist.gov/resources/n-lengths/elements/ni.html">scattering length</a> of <span class="math notranslate nohighlight">\(10.3\)</span> fm, the scattering length density is found as follows,</p>
<div class="math notranslate nohighlight">
\[
\beta_{\mathrm{Ni}} = \frac{\rho_{\mathrm{Ni}} N_a b_{\mathrm{Ni}}}{M_{w, \mathrm{Ni}}} = \frac{8.91 [\mathrm{g cm}^{-3}] \cdot 6.022\times 10^{23} [\mathrm{mol}^{-1}] \cdot 10.3 [\mathrm{fm}]}{58.69 [\mathrm{g mol}^{-1}]} = 9.417\times 10^{-6} [\mathrm{Å}^{-2}].
\]</div>
<p>We evaluate this in the code below.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pint</span>
<span class="kn">from</span> <span class="nn">scipy.constants</span> <span class="kn">import</span> <span class="n">N_A</span>
<span class="n">u</span> <span class="o">=</span> <span class="n">pint</span><span class="o">.</span><span class="n">UnitRegistry</span><span class="p">()</span>

<span class="n">N_A</span> <span class="o">/=</span> <span class="n">u</span><span class="o">.</span><span class="n">mol</span>

<span class="k">def</span> <span class="nf">rho_to_beta</span><span class="p">(</span><span class="n">rho</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">m_w</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    :param rho: mass density</span>
<span class="sd">    :param b: neutron scattering length for individual atoms</span>
<span class="sd">    :param m_w: molecular weight</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">rho</span> <span class="o">*</span> <span class="n">N_A</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">b</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">m_w</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">rho_Ni</span> <span class="o">=</span> <span class="mf">8.91</span> <span class="o">*</span> <span class="n">u</span><span class="o">.</span><span class="n">g</span> <span class="o">/</span> <span class="p">(</span><span class="n">u</span><span class="o">.</span><span class="n">cm</span> <span class="o">**</span> <span class="mi">3</span><span class="p">)</span>
<span class="n">b_Ni</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">10.3</span><span class="p">])</span> <span class="o">*</span> <span class="n">u</span><span class="o">.</span><span class="n">fm</span>
<span class="n">m_w_Ni</span> <span class="o">=</span> <span class="mf">58.69</span> <span class="o">*</span> <span class="n">u</span><span class="o">.</span><span class="n">g</span> <span class="o">/</span> <span class="n">u</span><span class="o">.</span><span class="n">mol</span>
<span class="n">beta_Ni</span> <span class="o">=</span> <span class="n">rho_to_beta</span><span class="p">(</span><span class="n">rho_Ni</span><span class="p">,</span> <span class="n">b_Ni</span><span class="p">,</span> <span class="n">m_w_Ni</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;beta_Ni = </span><span class="si">{</span><span class="n">beta_Ni</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="mi">1</span> <span class="o">/</span> <span class="p">(</span><span class="n">u</span><span class="o">.</span><span class="n">angstrom</span> <span class="o">**</span> <span class="mi">2</span><span class="p">))</span><span class="si">:</span><span class="s1">.3e</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>beta_Ni = 9.417e-06 / angstrom ** 2
</pre></div>
</div>
</div>
</div>
<p>Using this approach, the parameter that we vary in the <span class="xref myst">model-dependent analysis approach</span> can be the mass density rather than the more abstract scattering length density.
Additionally, this means that we can more easily <strong>constrain</strong> our fitting process, by assigning a set of bounds on our parameter (more on this <span class="xref myst">later</span>) based on <strong>reasonable</strong> values for the density of the material.
The majority of fitting packages can allow the reflectometry analysis model to be defined in terms of the parameters such as mass density, instead of the more traditional scattering length density.</p>
<p>We can also find the scattering length density of titanium by the same approach as above.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">rho_Ti</span> <span class="o">=</span> <span class="mf">4.51</span> <span class="o">*</span> <span class="n">u</span><span class="o">.</span><span class="n">g</span> <span class="o">/</span> <span class="p">(</span><span class="n">u</span><span class="o">.</span><span class="n">cm</span> <span class="o">**</span> <span class="mi">3</span><span class="p">)</span>
<span class="n">b_Ti</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="o">-</span><span class="mf">3.438</span><span class="p">])</span> <span class="o">*</span> <span class="n">u</span><span class="o">.</span><span class="n">fm</span>
<span class="n">m_w_Ti</span> <span class="o">=</span> <span class="mf">47.867</span> <span class="o">*</span> <span class="n">u</span><span class="o">.</span><span class="n">g</span> <span class="o">/</span> <span class="n">u</span><span class="o">.</span><span class="n">mol</span>
<span class="n">beta_Ti</span> <span class="o">=</span> <span class="n">rho_to_beta</span><span class="p">(</span><span class="n">rho_Ti</span><span class="p">,</span> <span class="n">b_Ti</span><span class="p">,</span> <span class="n">m_w_Ti</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;beta_Ti = </span><span class="si">{</span><span class="n">beta_Ti</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="mi">1</span> <span class="o">/</span> <span class="p">(</span><span class="n">u</span><span class="o">.</span><span class="n">angstrom</span> <span class="o">**</span> <span class="mi">2</span><span class="p">))</span><span class="si">:</span><span class="s1">.3e</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>beta_Ti = -1.951e-06 / angstrom ** 2
</pre></div>
</div>
</div>
</div>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./4_model_reparameterisation"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
              
              <!-- Previous / next buttons -->
<div class='prev-next-area'> 
    <a class='left-prev' id="prev-link" href="a_case_for_model_reparameterisation.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">A case for model reparameterisation</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="phospholipid_monolayer_example.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Phospholipid monolayer example</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
              
          </main>
          

      </div>
    </div>
  
  <script src="../_static/js/index.be7d3bbb2ef33a8344ce.js"></script>
<footer class="footer mt-5 mt-md-0">
  <div class="container">
    
    <div class="footer-item">
      <p class="copyright">
    &copy; Copyright 2021.<br>
</p>
    </div>
    
    <div class="footer-item">
      <p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 4.4.0.<br>
</p>
    </div>
    
  </div>
</footer>
  </body>
</html>